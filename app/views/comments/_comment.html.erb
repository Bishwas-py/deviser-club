<%= turbo_frame_tag comment, class: "" do %>
  <div class="w-full h-auto group overflow-x-scroll cute-scroll">
    <div class="w-full flex flex-col gap-2 px-3 py-2">
      <div class="flex gap-x-2">
        <%= image_tag "fav.png", class: "w-7 h-7 my-auto rounded-full object-cover bg-rose-50" %>
        <div class="flex flex-col">
          <span class="my-auto font-light text-sm">
            <%= comment.user.username %>
          </span>
          <span class="text-neutral-500 text-sm" title="<%= comment.created_at.to_fs %>">
            <%= time_ago_in_words(comment.created_at) %>
          </span>
        </div>
      </div>
      <p>
        <%= clean_links sanitize(comment.body, tags: %w(strong em a b code), attributes: %w(href)) %>
      </p>
    </div>

    <div class="float-right" data-controller="comment-auth" data-comment-auth-uid="<%= comment.user.id %>">
        <span class="hidden" data-comment-auth-target="delete">
          <%= button_to comment, method: :delete,
                        class: "text-rose-600 hover:text-rose-700 hover:underline
                      md:scale-0 group-hover:scale-100 duration-100 text-sm" do %>
            <%= icon "fa-solid", "trash" %>
          <% end %>
        </span>
    </div>
  </div>

<% end %>

<%= turbo_stream.replace "comments_count_top" do %>
  <%= turbo_frame_tag "comments_count_top",
                      data: {
                        controller: "ring-notification",
                        ring_notification_comment_uid: comment.user.id,
                        ring_notification_comment_notification_id: "#audiosource"
                      } do %>
    <span class="text-xl font-bold">
      Comments(<%= comment.commentable.comments.count %>)
    </span>
  <% end %>
<% end %>

<%= turbo_stream.replace "comments_count_bottom" do %>
  <%= turbo_frame_tag "comments_count_bottom", class: "h-3 w-3 rounded-full absolute bg-rose-700/70 backdrop-blur top-0 right-0", style: "font-size: 9px;" do %>
    <%= comment.commentable.comments.count %>
  <% end %>
<% end %>