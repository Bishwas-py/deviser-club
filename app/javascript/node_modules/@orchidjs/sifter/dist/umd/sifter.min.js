!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).sifter=t()}(this,(function(){"use strict"
var e
const t="[̀-ͯ·ʾ]",r=new RegExp(t,"gu")
var n
const i={"æ":"ae","ⱥ":"a","ø":"o"},o=new RegExp(Object.keys(i).join("|"),"gu"),s=[[0,65535]],c=e=>e.normalize("NFKD").replace(r,"").toLowerCase().replace(o,(function(e){return i[e]})),u=(e,t="|")=>{if(1==e.length)return e[0]
var r=1
return e.forEach((e=>{r=Math.max(r,e.length)})),1==r?"["+e.join("")+"]":"(?:"+e.join(t)+")"},f=e=>{const t=e.map((e=>d(e)))
return u(t)},a=e=>{if(1===e.length)return[[e]]
var t=[]
return a(e.substring(1)).forEach((function(r){var n=r.slice(0)
n[0]=e.charAt(0)+n[0],t.push(n),(n=r.slice(0)).unshift(e.charAt(0)),t.push(n)})),t},l=t=>{void 0===n&&(n=(t=>{var r={}
t.forEach((e=>{for(let n=e[0];n<=e[1];n++){let e=String.fromCharCode(n),i=c(e)
if(i!=e.toLowerCase()&&!(i.length>3)){i in r||(r[i]=[i])
var t=new RegExp(f(r[i]),"iu")
e.match(t)||r[i].push(e)}}}))
let n=Object.keys(r)
for(let e=0;e<n.length;e++){const t=n[e]
r[t].length<2&&delete r[t]}n=Object.keys(r).sort(((e,t)=>t.length-e.length)),e=new RegExp("("+f(n)+"[̀-ͯ·ʾ]*)","gu")
var i={}
return n.sort(((e,t)=>e.length-t.length)).forEach((e=>{var t=a(e).map((e=>(e=e.map((e=>r.hasOwnProperty(e)?f(r[e]):e)),u(e,""))))
i[e]=u(t)})),i})(s))
return t.normalize("NFKD").toLowerCase().split(e).map((e=>{const t=c(e)
return""==t?"":n.hasOwnProperty(t)?n[t]:e})).join("")},h=(e,t)=>{if(e)return e[t]},g=(e,t)=>{if(e){for(var r,n=t.split(".");(r=n.shift())&&(e=e[r]););return e}},p=(e,t,r)=>{var n,i
return e?-1===(i=(e+="").search(t.regex))?0:(n=t.string.length/e.length,0===i&&(n+=.5),n*r):0},d=e=>(e+"").replace(/([\$\(-\+\.\?\[-\^\{-\}])/g,"\\$1"),m=(e,t)=>{var r=e[t]
if("function"==typeof r)return r
r&&!Array.isArray(r)&&(e[t]=[r])},y=(e,t)=>{if(Array.isArray(e))e.forEach(t)
else for(var r in e)e.hasOwnProperty(r)&&t(e[r],r)},v=(e,t)=>"number"==typeof e&&"number"==typeof t?e>t?1:e<t?-1:0:(e=c(e+"").toLowerCase())>(t=c(t+"").toLowerCase())?1:t>e?-1:0

;/**
	 * sifter.js
	 * Copyright (c) 2013–2020 Brian Reavis & contributors
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this
	 * file except in compliance with the License. You may obtain a copy of the License at:
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software distributed under
	 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF
	 * ANY KIND, either express or implied. See the License for the specific language
	 * governing permissions and limitations under the License.
	 *
	 * @author Brian Reavis <brian@thirdroute.com>
	 */
return class{constructor(e,t){this.items=void 0,this.settings=void 0,this.items=e,this.settings=t||{diacritics:!0}}tokenize(e,t,r){if(!e||!e.length)return[]
const n=[],i=e.split(/\s+/)
var o
return r&&(o=new RegExp("^("+Object.keys(r).map(d).join("|")+"):(.*)$")),i.forEach((e=>{let r,i=null,s=null
o&&(r=e.match(o))&&(i=r[1],e=r[2]),e.length>0&&(s=this.settings.diacritics?l(e):d(e),t&&(s="\\b"+s)),n.push({string:e,regex:s?new RegExp(s,"iu"):null,field:i})})),n}getScoreFunction(e,t){var r=this.prepareSearch(e,t)
return this._getScoreFunction(r)}_getScoreFunction(e){const t=e.tokens,r=t.length
if(!r)return function(){return 0}
const n=e.options.fields,i=e.weights,o=n.length,s=e.getAttrFn
if(!o)return function(){return 1}
const c=1===o?function(e,t){const r=n[0].field
return p(s(t,r),e,i[r])}:function(e,t){var r=0
if(e.field){const n=s(t,e.field)
!e.regex&&n?r+=1/o:r+=p(n,e,1)}else y(i,((n,i)=>{r+=p(s(t,i),e,n)}))
return r/o}
return 1===r?function(e){return c(t[0],e)}:"and"===e.options.conjunction?function(e){for(var n,i=0,o=0;i<r;i++){if((n=c(t[i],e))<=0)return 0
o+=n}return o/r}:function(e){var n=0
return y(t,(t=>{n+=c(t,e)})),n/r}}getSortFunction(e,t){var r=this.prepareSearch(e,t)
return this._getSortFunction(r)}_getSortFunction(e){var t,r,n
const i=this,o=e.options,s=!e.query&&o.sort_empty?o.sort_empty:o.sort,c=[],u=[]
if("function"==typeof s)return s.bind(this)
const f=function(t,r){return"$score"===t?r.score:e.getAttrFn(i.items[r.id],t)}
if(s)for(t=0,r=s.length;t<r;t++)(e.query||"$score"!==s[t].field)&&c.push(s[t])
if(e.query){for(n=!0,t=0,r=c.length;t<r;t++)if("$score"===c[t].field){n=!1
break}n&&c.unshift({field:"$score",direction:"desc"})}else for(t=0,r=c.length;t<r;t++)if("$score"===c[t].field){c.splice(t,1)
break}for(t=0,r=c.length;t<r;t++)u.push("desc"===c[t].direction?-1:1)
const a=c.length
if(a){if(1===a){const e=c[0].field,t=u[0]
return function(r,n){return t*v(f(e,r),f(e,n))}}return function(e,t){var r,n,i
for(r=0;r<a;r++)if(i=c[r].field,n=u[r]*v(f(i,e),f(i,t)))return n
return 0}}return null}prepareSearch(e,t){const r={}
var n=Object.assign({},t)
if(m(n,"sort"),m(n,"sort_empty"),n.fields){m(n,"fields")
const e=[]
n.fields.forEach((t=>{"string"==typeof t&&(t={field:t,weight:1}),e.push(t),r[t.field]="weight"in t?t.weight:1})),n.fields=e}return{options:n,query:e.toLowerCase().trim(),tokens:this.tokenize(e,n.respect_word_boundaries,r),total:0,items:[],weights:r,getAttrFn:n.nesting?g:h}}search(e,t){var r,n,i=this
n=this.prepareSearch(e,t),t=n.options,e=n.query
const o=t.score||i._getScoreFunction(n)
e.length?y(i.items,((e,i)=>{r=o(e),(!1===t.filter||r>0)&&n.items.push({score:r,id:i})})):y(i.items,((e,t)=>{n.items.push({score:1,id:t})}))
const s=i._getSortFunction(n)
return s&&n.items.sort(s),n.total=n.items.length,"number"==typeof t.limit&&(n.items=n.items.slice(0,t.limit)),n}}}))
//# sourceMappingURL=sifter.min.js.map
